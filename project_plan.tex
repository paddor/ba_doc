% vim: ft=tex
\chapter{Project plan}
\section{Software development process}
The \gls{RUP} is used to plan and manage this term project. It’s an iterative,
structured, yet flexible development process which suits this kind of project.
At HSR, it’s taught as part of the Software Engineering courses and is thus a
primary candidate.

Another candidate was Scrum, which we decided against as it’s only feasible
with teams of three to nine developers.

\section{Timetable}
\subsection{Estimated time}\label{sec:projplan:est-time}
The project spans from September \nth{19} until December \nth{23}. We expect a
necessary effort of about 28.5 hours a week which results in a total of
400 hours per group member. See \autoref{tab:timetable}.

\begin{table}[H]
  \centering
  \begin{tabular}{|p{100mm}|p{35mm}|}
    \hline 	\bf Project duration & 14 weeks \\ \hline
	\bf Manpower & 2 \\ \hline
	\bf Effort per person & 28.5 hours per week \\ \hline
	\bf Total estimated time without weighted damage & 720 hours \\ \hline
	\bf Total estimated time including weighted damage & 856 hours \\ \hline
	\bf Project start & September \nth{19} 2016 \\ \hline
	\bf Project end & December \nth{23} 2016 \\ \hline
  \end{tabular} \\
  \caption{Timetable}
  \label{tab:timetable}
\end{table}

The average between best case and worst case is $\frac{720 + 856\,hours}{2} =
788$ hours. Counting in a reserve of 10\% more of additional effort that might be needed to
mitigate materialized risks, this results in $788\,hours + 10\% *
136\,hours\approx 800$ hours of total effort.


\subsection{Time tracking}
All time spent on the bachelor thesis are done on Everhour. Every time record
is associated with a GitHub issue where applicable.
The estimated time is set directly on each GitHub issue using the Everhour plugin.

Everhour allows the export of all time spent on a project, which will be
included as part of the final submission of this bachelor thesis.

\subsection{Quality assurance}


\subsubsection{Software}
To ensure a consistent code quality in the main development branch
(\emph{master}), unit tests and integration test are run before every push of
new changes to the repository on GitHub. Any pending issues found are to be
fixed before the push.


The development of larger -- requiring more than one commit -- features is done
on a specific feature branch.  Upon completion, instead of merging the branch
directly into the main development branch, a pull request is opened on GitHub.
This allows the other student and/or the client to review, discuss, and improve
the changes. The final merge is to be done by a person other than the one who
opened the pull request.

\subsubsection{Documentation}
Important sections are proof read by the co-student and discussed during the
weekly stand-up meetings.

At the beginning of this bachelor thesis, the professor has been consolidated
for inputs regarding the structure of this document. His advice has been
respected as far as feasible.

Andy Rohr from mindclue GmbH has assisted as another proof reader, especially
for technical correctness regarding the Roadster framework.


\subsection{Meetings}
Meetings are called for by the students on an as-needed basis in consultation
with the professor or the client. Prior to a meeting, the students prepare a meeting
agenda on the wiki of the documentation repository on GitHub.

The meeting agenda for meetings with the professor include the new progress
(incremental), problems, agenda (such as administrative questions), and
short-term goals.

After each meeting, the students follow up by writing down meeting minutes
which include the list of actual participants, decisions made, and pending
tasks.

In addition to the meetings with the client and the professor, the students
hold a weekly standup meeting placed in early/mid-week, which is to be a short
exchange of the current project status, review of the last week, and a
discussion of the next short-term steps.

\subsubsection{Review}
By the end of the bachelor thesis, a total of six meetings (including the
kickoff meeting) have been conducted together with the professor. The meeting
minutes are on \cite[Meetings]{gh:wiki}.

The client mindclue GmbH has been met four times. The first meeting was to
gather the requirements during the first week. The second meeting was necessary
to clarify the requirements and decide upon a more structured format of the
requirements (Cucumber features). The third meeting took place during the
second Elaboration iteration to help with Roadster's codebase in preparation of
the upcoming construction phase. The last meeting was a code review meeting
after the first Construction iteration. Further code reviews were performed
directly on GitHub.

Acute discussions and more lightweight decisions with the client were held on
the particular GitHub issues \cite{gh:issues} directly, as well as the Slack
communication platform.


\section{Risks}
There were nine risks that have been identified by the end of the Inception phase.
The risks have a total damage of 369 hours. The total damage hours multiplied
by the probability of admission result in a total of 137 hours. The weighted damage
hours are included in the project planning.

\subsection{Handling risks}
Due to the nature of the risks, it is only natural they change over the course of a project.
To mitigate this, the risks are checked regularly (in weekly meetings) using \autoref{tab:init-risks}.

Changes to existing risks are possible. This usually means that either the likelihood or
the unweighted damage must be adapted immediately. Moreover, it is possible for a risk to
be completely ruled out, or that a new risk arises. All these points need to be discussed in
the team and tracked accordingly.

\section{Listed risks}
\begin{tabular}[t]{@{}>{\raggedright}p{0.45\textwidth}}
  \textbf{\textit{P = Probability}}
  \begin{enumerate}[topsep=0pt,itemsep=-2pt,leftmargin=13pt]
  \item Rare (10\%)
  \item Unlikely (30\%)
  \item Possible (50\%)
  \item Likely (70\%)
  \item Certain (90\%)
  \end{enumerate}
\end{tabular}
\begin{tabular}[t]{@{}>{\raggedright}p{0.52\textwidth}@{}}
  \textbf{\textit{D = Damage potential  / R = Risk}}
  \begin{enumerate}[topsep=0pt,itemsep=-2pt,leftmargin=13pt]
  \item Insignificant
  \item Negligible
  \item Moderate
  \item Serious
  \item Significant
  \end{enumerate}
\end{tabular}

\autoref{tab:init-risks} lists the initially identified risks. The delay is
specified in days. One day equals 16 man-hours.

\begin{center}
  \begin{longtable}{|p{6mm}|p{30mm}|p{6mm}|p{8mm}|p{30mm}|p{64mm}|}
    \hline \multicolumn{1}{|l|}{\textbf{ID}} &
    \multicolumn{1}{l|}{\textbf{Description}} &
    \multicolumn{1}{l|}{\textbf{P}} &
    \multicolumn{1}{l|}{\textbf{DP}} &
    \multicolumn{1}{l|}{\textbf{Prevention}} &
    \multicolumn{1}{l|}{\textbf{Measures to be taken upon event}} \\ \hline
    \endfirsthead

    \multicolumn{6}{c}%
    {{\bfseries \tablename\ \thetable{} -- continues}} \\
    \hline \multicolumn{1}{|l|}{\textbf{ID}} &
    \multicolumn{1}{l|}{\textbf{Description}} &
    \multicolumn{1}{l|}{\textbf{P}} &
    \multicolumn{1}{l|}{\textbf{DP}} &
    \multicolumn{1}{l|}{\textbf{Prevention}} &
	\multicolumn{1}{l|}{\textbf{Measures to be taken upon event }} \\ \hline
    \endhead

    \hline \multicolumn{6}{c}{{Continues on the next page}} \\ \hline
    \endfoot

    \hline
    \endlastfoot
    R01
		& Roadster requires different ZMQ contexts to function (not possible with CZTop because CZMQ hides contexts)
		& \cellcolor{green!50}1
		& \cellcolor{green!50}3
		& check with client	(done)
		& extract and run affected ZMQ \newline sockets in their own process \newline delay: 1-2 days \\ \hline
	R02
		& Wrong protocols chosen / protocol design flaw
		& \cellcolor{orange!50}3
		& \cellcolor{orange!50}5
		& Architecture \newline reviews prototypes
		& Fix (reevaluate reengineer, redesign) \newline delay: 8-12 days	\\ \hline
	R03
		& ZMQ communication patterns (such as Binary Star) are difficult to implement as clean, reusable code
		& \cellcolor{yellow!50}2
		& \cellcolor{yellow!50}4
		& Use software engineering knowhow to aim for clean, reusable prototypes
		& Nice solution: \newline build more iteratively, step by step \newline delay: 2-4 days \newline \newline dirty solution:
		\newline customized solution built right into Roadster, not as a public gem \newline delay: 1-2 days \\ \hline
	R04
		& CZTop design flaws/limitations
		& \cellcolor{green!50}2
		& \cellcolor{green!50}2
		& Check functionality in the elaboration phase
		& Adapt CZTop \newline delay: 1-2 days \\ \hline
	R05
		& CZMQ changes API
		& \cellcolor{green!50}1
		& \cellcolor{green!50}3
		& (hope)
		& Adapt CZTop, change CZTop adapter in Roadster, or just avoid upgrading CZMQ (use a commit before the breaking change) \newline delay: 1-2 days \\ \hline
	R06
		& Wrong time estimations
		& \cellcolor{yellow!50}4
		& \cellcolor{yellow!50}3
		& Use time well during planning, and define clear milestones
		& If possible, change the duration of the individual project phases. Otherwise, drop planned features
		(starting with the optional goal) \newline delay: 4-5 days \\ \hline
	R07
		& Managing multiple Projects (at least one per repo) on GitHub too painful
		& \cellcolor{green!50}4
		& \cellcolor{green!50}1
		& Setup project structure in the elaboration phase
		& Partial solution: \newline CodeTree (cannot seem to be used for private repos like Roadster itself (maybe yes! see  mindclue/roadster\#5) \newline
		\newline complete solution: \newline Use a single Project which just has cards that link to issues from other repos.
		Linking to "foreign" issues is additional effort but should be straight forward using GitHub syntax (https://github.com/org/repo/issues/42)
		\newline delay: 1 day \\ \hline
	R08
		& Prolonged loss of a team member
		& \cellcolor{green!50}2
		& \cellcolor{green!50}3
		& Track absences in meeting minutes.
		& In a prolonged absence, move milestones and, if necessary, change the project scope. \newline delay: 3-10 days \\ \hline

	R09
		& Failure to achieve the defined task in time
		& \cellcolor{green!50}1
		& \cellcolor{green!50}4
		& Continuous monitoring whether we are on schedule and whether all requirements are met.
		& Meeting convened as we still can transpose a large part of the required task within the prescribed period. \newline delay: 1-5 days\\ \hline
   \caption{Initial risks} \label{tab:init-risks} \\
   \end{longtable}
\end{center}

\begin{table}[H]
  \centering
  \scriptsize
  \begin{tabular}{|m{27mm}|m{24mm}|m{20mm}|m{20mm}|m{20mm}|m{20mm}|@{}m{0pt}@{}}
    \hline
    \bf Probability / Damage
  & \bf 1-Insignificant.
  & \bf 2-Negligible
  & \bf 3-Moderate
  & \bf 4-Serious
  & \bf 5-Significant
  & \\ [10pt]
    \hline
    \bf 5-Certain 
  & \cellcolor{yellow!50}
  & \cellcolor{yellow!50}
  & \cellcolor{orange!50}
  & \cellcolor{red!50}
  & \cellcolor{red!50}
  & \\ [10pt]
    \bf 4-Likely
  & \cellcolor{green!50} R07
  & \cellcolor{yellow!50}
  & \cellcolor{yellow!50} R06
  & \cellcolor{orange!50}
  & \cellcolor{red!50}
  & \\ [10pt]
    \bf 3-Possible
  & \cellcolor{green!50}
  & \cellcolor{green!50}
  & \cellcolor{yellow!50}
  & \cellcolor{yellow!50}
  & \cellcolor{orange!50} R02
  & \\ [10pt]
    \bf 2-Unlikely
  & \cellcolor{green!50}
  & \cellcolor{green!50} R04
  & \cellcolor{green!50} R08
  & \cellcolor{yellow!50} R03
  & \cellcolor{yellow!50}
  & \\ [10pt]
    \bf 1-Rare
  & \cellcolor{green!50}
  & \cellcolor{green!50}
  & \cellcolor{green!50} R01, R05
  & \cellcolor{green!50} R09
  & \cellcolor{green!50}
  & \\ [10pt]
    \hline
  \end{tabular} \\
  \caption{Initial risk matrix}
\end{table}

\begin{ganttchart}[
  hgrid,
  vgrid,
  x unit=9mm
]{1}{14}
\ganttset{bar incomplete/.append style={fill=gray!40},
  group/.append style={draw=black, fill=gray},}
\gantttitle{Calendar weeks}{14} \\
\gantttitlelist{38,...,51}{1} \\
\gantttitle{Semester week}{14} \\
\gantttitlelist{1,...,14}{1} \\
\ganttgroup{Inception}{1}{1} \\
\ganttgroup{Elaboration 1}{2}{4} \\
\ganttgroup{Elaboration 2}{5}{6} \\
\ganttgroup{Elaboration 3}{7}{7} \\
\ganttgroup{Construction 1}{8}{9} \\
\ganttgroup{Construction 2}{10}{11} \\
\ganttgroup{Construction 3}{12}{13} \\
\ganttgroup{Transition}{14}{14} \\
\ganttbar[bar/.append style={fill=green}]{R01}{1}{6} \\
\ganttbar[bar/.append style={fill=orange}]{R02}{1}{5}\ganttbar[bar/.append style={fill=yellow}]{}{5}{5}\ganttbar[bar/.append style={fill=green}]{}{5}{6} \\
\ganttbar[bar/.append style={fill=yellow}]{R03}{1}{5}\ganttbar[bar/.append style={fill=green}]{}{5}{6} \\
\ganttbar[bar/.append style={fill=green}]{R04}{1}{5} \\
\ganttbar[bar/.append style={fill=green}]{R05}{1}{4} \\
\ganttbar[bar/.append style={fill=yellow}]{R06}{1}{5}\ganttbar[bar/.append style={fill=green}]{}{5}{7} \\
\ganttbar[bar/.append style={fill=green}]{R07}{1}{2} \\
\ganttbar[bar/.append style={fill=green}]{R08}{1}{13} \\
\ganttbar[bar/.append style={fill=green}]{R09}{1}{13} \\
%\ganttmilestone{Milestone 1}{11}
\end{ganttchart}

% TODO proof reading
\begin{table}[H]
  \centering
  \begin{tabular}{|p{20mm}|p{20mm}|p{102mm}|}
    \hline \bf Week & \bf Risk & \bf Description \\% [10pt]
    \hline 4 & R02 & The roughly planning of the protocols eliminated many uncertainties. \newline 
	The protocols were tested and no errors were found. \\% [10pt]
	\hline 6 & R02 & The prototype implementation showed that the rhougly designed protocol works as planned. \\% [10pt]
    \hline 4 & R03 & The evaluation of the different variants has reduced the risk. \\% [10pt]
	\hline 6 & R03 & The prototype implementation eliminated the risk. \\% [10pt]
	\hline 4 & R06 & Through the designing of all planned protocols and the first steps with roadster has reduced the risk. \\% [10pt]
	\hline 7 & R06 & The more effort involved in implementing the federation prototypes shows
		 that at the beginning of the construction phase it must be planned with more reserve time.
		The risk can be eliminated by means of the insights gained. \\% [10pt]
    \hline
  \end{tabular} \\
  \caption{Risk timeline change protocol}
\end{table}


\section{Phases \& iterations}
\autoref{tab:phases} illustrates the project's phases and iterations.

\begin{center}
  \begin{longtable}{ | p{25mm} | p{25mm} p{35mm}| p{5mm} | }
    \hline \multicolumn{1}{|c|}{\textbf{Iteration}} &
    \multicolumn{2}{p{70mm}|}{\textbf{Description}} &
    \multicolumn{1}{c|}{\textbf{Due}} \\ \hline
    \endfirsthead

    \multicolumn{4}{c}%
    {{\bfseries \tablename\ \thetable{} -- continues}} \\
    \hline \multicolumn{1}{c}{\textbf{Iteration}} &
    \multicolumn{2}{p{70mm}}{\textbf{Description}} &
    \multicolumn{1}{c}{\textbf{Due}} \\ \hline
    \endhead

    \hline \multicolumn{4}{c}{{Continues on the next page}} \\ \hline
    \endfoot

    \hline
    \endlastfoot
	Inception
	& \multicolumn{2}{p{70mm}|}{Setup proj mgmt, init documentation, define scope, understand requirements,
	set priorities, assess \& analyze risks, estimate schedule, get familiar with Roadster}
	& SW01 \\ \hline
	  \textbf{MS Inception}
	& \textbf{Date}
	& \multicolumn{2}{l|}{25th Sept 2016} \\
	& \textbf{Description}
	& \multicolumn{2}{l|}{Inception phase complete} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Project plan} \\
	& & \multicolumn{2}{l|}{Risk matrix} \\
	& & \multicolumn{2}{l|}{Project mgmt infrastructure} \\
	\hline
	\hline
	Elaboration 1
	& \multicolumn{2}{p{70mm}|}{Gather requirements, fundamental thoughts on testing, roughly protocol designs,
	federation, single \& multi level HA, persistence, key distribution, OPC-UA HA interface}
	& SW04 \\ \hline
	  \textbf{MS E1:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{16th Oct 2016} \\
	Protocol & \textbf{Description}
	Designs & \multicolumn{2}{l|}{Protocol designs are defined} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Requirements \& use cases} \\
	&
	& \multicolumn{2}{l|}{Protocol designs} \\ \hline
	Elaboration 2
	& \multicolumn{2}{p{70mm}|}{Implement prototypes (federation, single \& multi level HA, persistence, secure socket,
	communication, OPC-UA HA interface}
	& SW06 \\ \hline
	  \textbf{MS E2:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{30th Oct 2016} \\
	Prototypes & \textbf{Description}
	& \multicolumn{2}{l|}{Prototypes are implemented and tested.} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Runnable prototypes} \\
	  \hline
	  \hline
	Elaboration 3
	& \multicolumn{2}{p{70mm}|}{Revise risks, finish bulk of documentation, (reserve)}
	& SW07 \\ \hline
	Construction 1
	& \multicolumn{2}{p{70mm}|}{Port CZTop, federation (refactor \& integrate prototype)}
	& SW09 \\ \hline
	\textbf{MS C1:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{20th Nov 2016} \\
	Federation & \textbf{Description}
	& \multicolumn{2}{l|}{Runnable federation functionality on top of CZTop.} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Federation functionality, CZTop integration} \\
	\hline
	\hline

	Construction 2
	& \multicolumn{2}{l|}{Refactor, integrate and verify HA prototypes, persistence replication}
	& SW11 \\ \hline
	\textbf{MS C2:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{4th Dec 2016} \\
	HA & \textbf{Description}
	& \multicolumn{2}{l|}{Working HA functionality and persistence replication} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{HA functionality} \\
	& & \multicolumn{2}{l|}{Persistence replication} \\ \hline
	Construction 3
	& \multicolumn{2}{p{70mm}|}{Security (implement prototype, test), OPC UA HA (implement prototype, verify)}
	& SW13 \\ \hline
	\textbf{MS C3:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{18th Dec 2016} \\
	Security & \textbf{Description}
	& \multicolumn{2}{l|}{Secure communication between nodes} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Security} \\
	\hline
	\hline

	Transition 1
	& \multicolumn{2}{p{70mm}|}{Polish documentation, write abstract, create poster, print documentation \& upload artifacts}
	& SW14 \\ \hline
	\textbf{MS T1:}
	& \textbf{Date}
	& \multicolumn{2}{l|}{23rd Dec 2016 - 5:00 pm} \\
	Delivery & \textbf{Description}
	& \multicolumn{2}{l|}{Complete handover of thesis} \\
	& \textbf{Workproducts}
	& \multicolumn{2}{l|}{Thesis in paperform} \\
	\hline
	\hline

   \caption{Phase and iterations} \label{tab:phases}
   \end{longtable}
\end{center}
